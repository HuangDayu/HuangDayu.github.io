---
title: Linux填坑记
date: 2018-10-16 20:37:46
category:
- 研讨技术
tags:
- Linux
permalink: /blog/20
---


# 系统安装失败[^1]

## 问题呈现

<span style="color:#ff0000;font-weight:bold;">starting dracut initqueue hook</span>  


## 问题原因

不支持U盘格式  


## 解决办法


1. 选中 Install CentOS Linux 7 选项，然后按Tab 键；
2. 修改屏幕下方的语句；

   1. 修改前：linuxefi /images/pxeboot/vmlinuz inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 xdriver=vesa nomodeset quiet
   2. 修改后：linuxefi /images/pxeboot/vmlinuz linux dd quiet
3. 保存修改：回车；
4. 可以看到挂载的U盘 如：sdb4  （注意U盘格式：NTFs不行，vfat可以）；
5. 重启；
6. 重复第1，2步，修改之前那个语句；
   1. 修改后：linuxefi /images/pxeboot/vmlinuz inst.stage2=hd:/dev/sdb4 xdriver=vesa nomodeset quiet
7. 回车就可以开始安装。

## 小结


&emsp;&emsp;Linux系统和Windows系统的支持的盘符格式存在差异。


# 数据库不能建缓存表[^2]


## 问题呈现

删除并清除缓存失败：  

```shell
[root@izj6cfb1l7df1uw622j2czz ROOT]# sudo rm -r ./*
sudo: unable to stat /etc/sudoers: Permission denied
sudo: no valid sudoers sources found, quitting
sudo: unable to initialize policy plugin
```
对部分文件夹没有权限：  

```shell
Mysql ERROR 1005 (HY000): Can't create temporary table 'tmp' (errno: 13)
```

&emsp;&emsp;如mysql不能创建缓存表。   

## 问题原因

```shell
chmod 777 /*
```

&emsp;&emsp;因为在给文件夹赋值权限的时候，把路径输入错误了，本来是当前路径，却输入成了根路径。  

## 解决办法

&emsp;&emsp;Linux系统文件的权限大都是 775 ，所以改回 775 就OK了。  

```shell
chomd 775 /*
```

&emsp;&emsp;这样改可能还不全面，比如原本 777 权限的文件夹就改成了775，这就引发了mysql不能创建混存表的问题。

```shell
chown -R mysql:mysql /var/lib/mysql/database_name
chmod 0777 /tmp
```

&emsp;&emsp;主要的还是赋予权限的问题，对用户以及用户组的更改似乎没能解决问题。

## 小结

&emsp;&emsp;众所周知，Linux对权限的管理非常严格，这个文件是哪个用户创建，归哪个用户所有，哪个用户阅读，哪个用户可以修改，这些都可以通过命令来规定。操作系统下的root用户是超级用户，拥有对普通用户的控制权。所以，当一个命令输入错误，没有及时发现，就成了翻车现场！


# 脚注

[^1]: 2018-10-16更新，原文是：U盘安装CentOS填坑记，已删除
[^2]: 2019-06-29更新，原文是：一条错误Linux命令引发的惨案，已删除


