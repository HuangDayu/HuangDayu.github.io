---
title: 关于架构与架构师的思考
date: 2020-11-14 22:24:41
categories: 
- 激扬文字
layout: post
published: true
permalink: /blog/44
---

## 前言

---

&emsp;&emsp;最近经历了一次架构的设计、选型、搭建到开发的心路历程。为什么先是设计，然后选型和搭建，最后才是开发呢？这其实跟建房子一个道理。在需求分析和评审之后，开工之前，你就要考虑到房屋的结构，承重，所处地形地壳的软硬层度，以及地基，地台，框架，墙体等如何设计，接着开始着手材料的选型，钢筋，水泥，混泥土，成本，耐用性，以及施工成本和难度的考量，最后才是开始地基的建设，然后的房屋架构的施工。进过这一系列的流程之后，房子如期交付，并通过各项检测，你的客户才能真正满意。

&emsp;&emsp;所以，一个平台、系统的从零到一，从设计，选型，搭建到开发这一系列过程和阶段都最为重要。

<!-- more -->

## 架构设计的不同层次

---

- 技术架构：描述平台、系统采用何种技术所实现的架构。
- 业务架构：描述平台、系统的使用各种技术所实现各种业务或功能架构。
- 应用架构：描述平台、系统将各种业务或功能封装成各个应用模块提供服务的架构。
- 产品架构：描述平台、系统整合各个应用模块，整体可以对外提供服务、输出产品的架构。

&emsp;&emsp;可以看出，上述的几个架构层次中是层层递进的关系，技术架构是基石。但是，架构设计应当从产品架构开始，因为产品架构即需求，只有客户需求明确，产品定义清晰，应用边界明了，业务逻辑简洁，技术架构才能合理。

&emsp;&emsp;合理的技术架构设计，更够使得业务开发，应用封装，产品落地能够快速而平稳的推进。技术架构一般由这几种技术栈组成，例如服务，数据，缓存，事件、消息、安全，性能。

## 架构衡量的不同维度

---

&emsp;&emsp;我也曾思考过，什么是衡量一个架构优劣的标准，为此还在朋友圈发过下面一句话：

```tex
	衡量架构优劣的标准是什么？3A原则？3D设计？通吃CAP？似乎没有标准答案。我认为是事半功倍。快速交付，持续集成，灵活扩展是加分项。
```

&emsp;&emsp;如今看来，当初的看法还是有点片面了。

&emsp;&emsp;**首先，为什么要设计架构呢？**

&emsp;&emsp;设计架构所带来的好处是显而易见的，跟造房子一样，仅凭想象和理解，或者还有经验，没有一种参考依据，根本造不出稳固，安全，美观的房子，甚至造的过程中会出现反复修改，反复推翻重来，严重者甚至导致工程烂尾。我认为最起码有一下几点好处：

1. 让项目参与的所有人对项目有整体的认知，方便协调推进工作；
2. 理清项目实现的思路，可以更好的合理分配任务；
3. 经过团队斟酌和评审的架构，避免出现反复修改和推翻重来的风险；
4. 能更好的量化项目的工作量，计算所需要投入的人力物力财力；
5. 能合理的规划项目的开发周期；
6. 可估算出项目能够承载的压力，并发，性能；
7. 为项目后期的运营，维护，迭代和演进奠定基础。

&emsp;&emsp;**其次，架构设计的条件和愿景是什么？**

&emsp;&emsp;为什么先谈的是条件呢？其实就是你有多少钱就盖什么样的房子是一样的道理的。那么，放在技术项目这里，你就得先有自知之明，你有多少人力物力财力来去支撑你的项目开发，如果细分，甚至还可以分内部条件和外部条件，基础条件和客观条件。其次，你的愿景是什么，这个项目的发展空间如何，是长期项目还是短期项目，需要承载多大的并发，对性能，安全，可用性的要求如何，项目所规划的周期等等，这些都很关键。所以，在众多条件、因素、目的、利益驱使下，存在着各种各样的项目，有`历史包袱型`、`偷工减料型`、`脚踏实地型`、`高屋建瓴型`、`高瞻远瞩型`、`空中楼阁型`。

&emsp;&emsp;我更倾向于`高屋建瓴型`架构，因为只有对项目有着全面而深刻的认知，才能设计出即符合当下条件，又能实现当下愿景的架构，当然，要是能同时拥有`高瞻远瞩型`，那无疑是完美的。

&emsp;&emsp;通常，在网络上看各种技术文章，常看到以下字眼：`高可用`、`高并发`、`高吞吐`、`高性能`、`低延迟`、`低耦合`、`好扩展`、`更安全`、`一致性`、`容错性`...用这些指标去衡量或评价架构，我认为是有一定片面性的。

&emsp;&emsp;**最后，如何衡量或评价一个架构？**

&emsp;&emsp;事实上，架构并无优劣之分，只有合理与否。所以，做出客观评价之前，应当了解其基础条件，客观条件，架构愿景和真实需求。所以，我认为只需实事求是地回答以下几个问题：

1. 是否在预期之内实现需求，且并无反复修改的弊病；
2. 所占用的资源是否浪费，是否符合预期；
3. 各个层次的架构是否清晰分明；
4. 开发，集成，交付（部署），测试的效率和结果是否理想；
5. 是否存在拆东墙补西墙的错误；
6. 是否可以灵活扩展，平稳演进；
7. 定位问题的效率如何；
8. 对新技术或外部系统的整合能力如何；
9. 是否符合业界普遍认同的3A原则和3D设计；

## 技术选型的衡量指标

---

&emsp;&emsp;曾经看过一个报道，说99%的技术项目用到了开源技术，所以，是开源推动了这个世界的进步，感谢开源。何谓选型？字面意思就是在众多开源软件中选择一个最优选项。但是，这个最优选项是没有一个标准结果的，或者可以表述为最合理的选项。比如，关系型数据库是选`MySQL`还是`Oracle`，非关系型数据库是选`MongoDB`还是`Membase`，键值数据库是选`Redis`还是`Memcahe`，等等，这些都是要从不同的指标去考量，我认为可以有一下几点：

- 是否符合需求
- 稳定性
- 性能
- 可扩展性
- 功能和特性
- 利弊辩证
- 持续维护与活跃程度
- 开源的目的

&emsp;&emsp;为什么要加上`开源的目的`这个选项，因为这事关这个开源软件所承载的使命，比如说，一个软件开源是夹带私货，那么注定它的生命周期是短暂的，其出现问题的概率会远远大于其他软件。当然，这个问题应该要辩证的看待。并不是否定一些开源项目的贡献，因为，开源不仅仅是开放源代码，更重要的是开源之后的责任。无论是个人，社区还是企业，都感谢其对开源的贡献，当然也希望开源能否反哺开源人，这样开源才能行稳致远，同时也希望使用开源的人，能取之有道，方用之不竭。综上所述，首推[Linux基金会](https://github.com/linux)和[Apache基金会](https://github.com/apache)的开源项目。

## 架构搭建的法则

---

&emsp;&emsp;架构搭建往往是指各种开源软件的编译部署，在这个过程中，我踩了一些让人难以忘怀的坑，也许算不上坑，但是从使用者的角度来讲，这也许可以看做是开源软件的完善程度和技术支持方面的缺陷。所以，我也总结出以下几经验：

1. 一定要详细的阅读官方文档，如果没有详细的官方文档，建议弃坑；
2. 一定要下载官方发布的长期维护的版本（`LTS`）;
3. 遇到问题，先自查，也不要“恋战”，学会利用`issue`；
4. 然后其不能满足当下需求，如果条件允许，建议`fork`分支，高度定制 ；

## 开发如何有序开展

---

&emsp;&emsp;开发是项目开展的最重要的一环，如何有效推进开发，是相当复杂的一件事情。要说是否有比较成熟的方法论，那么当然是敏捷开发，这也是当下最热门的话题之一。所以，这个环节就没有过多讨论的必要了，不过，我有个建议，无论在业务逻辑实现还是算法实现的过程中，第一步应该先画一个流程图或者序列图，哪怕是简单的，这对你的代码思路是至关重要的。

## 架构师应该具有的高度与视角

---

&emsp;&emsp;一直以来，我对外都宣称我的短期目标是架构师，时至今日，我才对架构师有那么丁点的理解。当你向领导反馈意见时，你总会得到一句这样的回复：“每个人所在的位置不同，其所看问题的角度也不同”。这话是很有道理的。事物的发展都有点线面体，何况人看问题的角度，能够具备上帝视角的人寥寥无几。那么，架构师应该具备什么样的高度和视角呢？

&emsp;&emsp;其一，技术能力要全面。他不一定是高级技术人员，不一定要在学术上有所建树，但是其技术观要全面。架构师一般从一线开发人员做起，是从模块，项目，产品到产品线的进步过程。也就是从点，线，面到体的量的积累和质的进步。其对所在领域的技知识应当足够广泛，对该领域的核心技术应当有很深的造诣，对该领域未来的发展应当具有前瞻性眼光，对业务和技术应当具有全局性眼光，理解业务的本质，识别业务的风险，能够推动技术革新，业务改进和产品创新。这就是架构师的广度，深度和高度。

&emsp;&emsp;其二，领导能力要具备。架构师是技术团队的team leader，他可以负责技术团队和产品，运行，项目组之间的协调工作。要团结团队，协调沟通，整合资源，要果断，远见，自信，稳重，负责任。要具有整体，宏观的眼光，架构级别的描述，分析和评估。是所在开发团队的技术路线引领者，具备很强的系统思维能力，要在诸多技术方案和工具中作出决策。是一个思想成熟、知识丰富、经验丰富、良好教育、学习能力强、善于沟通、决策能力强的人。

## 总结

---

&emsp;&emsp;**架构没有优劣，架构师却有高低。架构应当是实用型架构，架构师应当是复合型架构师。**

&emsp;&emsp;以上是本人一些潦草而不成体系的看法和观点，如有不同观点，真知灼见，意见建议，还请不吝赐教。

## 参考文献

---

[我理解的架构师是这个样子](https://blog.shareworld.vip/archives/arch2)  
[架构方法论](https://www.cnblogs.com/duanxz/p/4464155.html)  
[系统架构设计方法论](https://www.cnblogs.com/xiang--liu/p/9710229.html)  
[大家在寻找的高级程序员到底是什么样子的？](https://mp.weixin.qq.com/s/xGVrbZT9ZMos0Oq7Dd64vg)  

## 说明

---

- 2021-03-11 原标题《~~架构设计，选型，搭建，开发过程中的思考~~》改为《关于架构与架构师的思考》